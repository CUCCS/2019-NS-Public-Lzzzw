#基于VirtualBox的网络攻防基础环境搭建
***
##实验目的
- 掌握VirtualBox虚拟机的安装与使用;
- 掌握VirtualBox虚拟网络类型和按需配置;
- 掌握VirtualBox虚拟硬盘的多重加载;
##实验环境
###以下是本次实验需要使用的网络节点说明和使用到的软件：
- Virtualbox虚拟机
- 攻击者主机：kail attck
- 网关：Debian 网关
- 靶机：xp 靶机1 xp靶机

##实验要求
[√]靶机可以直接访问攻击者主机

[√]攻击者主机无法直接访问靶机

[√]网关可以直接访问攻击者主机和靶机

[×]靶机的所有上下行流量必须经过网关

[√]所有节点可以访问互联网

##实验过程
 - 将虚拟硬盘设置成多重加载，并以此创建靶机，攻击者，网关

 - 依次进行网络配置，其中靶机均为内部网络，网关有四个网卡，分别是NAT网络，仅主机网络与两个子网（四个靶机分成的两个局域网），攻击者有三个网卡，，分别为NAT网络与两个仅主机网络

![](https://i.imgur.com/e2hB0JM.png)
![](https://i.imgur.com/9v3q3B1.png)
![](https://i.imgur.com/DfTBEfR.png)
![](https://i.imgur.com/7rnPUGH.png)

 - 构成课本中所示的网络拓扑结构，两个靶机各一个网络，分别连接到网关上，网关与互联网连接；攻击者与互联网连接，与靶机所在的网络不相连

 - 分别查看四个靶机，一个网关，一个攻击者的ip地址，观察网络配置是否成功，是否构成如上图所示的拓扑结构，并为后续实验做准备
 
 网关：
![](https://i.imgur.com/T6RIPqY.png)
 靶机：
![](https://i.imgur.com/ABNTX3V.png)
![](https://i.imgur.com/CoZ2AzN.png)
 攻击者：
![](https://i.imgur.com/snS6s7Z.png)
---
##网络连通性测试

###靶机可以直接访问攻击者主机

由于靶机可以经过网关连接到互联网，而攻击者主机也连接到了互联网，靶机可以访问互联网，故可以直接访问攻击者主机。

 - 靶机可以访问kali attck
![](https://i.imgur.com/xDeBLij.png)

### 网关可以直接访问攻击者和靶机 ###

 - 网管访问攻击者主机
![](https://i.imgur.com/yYYJoWv.png)
 - 网管访问靶机
 ![](https://i.imgur.com/hpJYApy.png)
### 攻击者无法直接访问靶机 ###

由于攻击者所在主机仅能访问到互联网和互联网所连接的所有机器，而靶机所在网络属于内部网络，连接到网关后才可连接到互联网，所以攻击者主机无法在互联网中找到此ip地址，无法直接访问靶机。

 - 攻击者不能访问靶机
![](https://i.imgur.com/N1j51UJ.png)
### 靶机的所有对上下行流量必须经过网关 ###
由于靶机可以访问互联网，所以在网关中抓取数据包，如果请求数据的包和回复的包可以在网关中被抓到，而关闭网关所在的虚拟机以后，所有靶机均无法上网，则说明靶机的所有对外上下行流量必须经过网关。

 - 但是我的虚拟机好像有点问题
 - 开始就是和下图一样，我一通操作后，镜像都打不开了，不知道出啥问题了
![](https://i.imgur.com/ZWgsLNI.png)
![](https://i.imgur.com/eKh90xk.png)
###所有节点都可以访问互联网

 - 网关
![](https://i.imgur.com/BOxYfzO.png)
 - 靶机
        
  有一个坏了打不开了
![](https://i.imgur.com/xWlSBb1.png)
![](https://i.imgur.com/F8XX53q.png)

 - 攻击者


【注】

做了好久才慢慢做出来，做的有点头大，很多细节上面都没注意，有很多小毛病，虚拟机命名啊这些，等做完了才注意，下次注意。
